<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>Joseph Crop - NANDAnalogComparator </title>
	<meta http-equiv='Content-Style-Type' content='text/css' />
	<!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: pre; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  .TCprogress {background-color:#5af; min-height:13px; width:13px; color:#fff; margin-left:auto; margin-right:auto;}
table.TotalCounter td {font-size:x-small; text-align:center}.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  td.markup1 pre { white-space: pre-wrap; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none;}

--></style>  <meta name='robots' content='noindex,nofollow' />

	<link rel='stylesheet' href='../_fpub/skins/simpletab/pmwiki.css' type='text/css' />
	<style type='text/css'><!--
	#header {background-color: #950;}
	a:link, a:visited, #menu ul li .here a, #menu ul li .here a:hover {color: #950;}
	--></style>
	<!--[if lte IE 6]>
	<style type="text/css">
	img, #logo, #vis, #header { behavior: url("../_fpub/skins/simpletab/iepngfix.htc"); }
	</style>
	<![endif]-->
</head>
<body>
	<div id="main" style="position:absolute; top:20px; left:5px; z-index:101;">
		<div class="image" style="width:94px;display:inline;"> 
			<a href=".."><img border="0" src="../_fpub/skins/simpletab/images/me.png" title="Joe Crop"></img></a>
		</div>
		<div class="image" style="width:50px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/chip1.jpg" title="Sub-Threshold Asynchronous Multiplier"></img>
		</div>
		<div class="image" style="width:50px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/chip2.png" title="Low-Power Wireles Brain Sensor"></img>
		</div>
		<div class="image" style="width:50px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/chip3.jpg" title="Current Sensing and Sub-Threshold Variability Test Chip"></img>
		</div>
		<div class="image" style="width:50px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/chip4.png" title="Synctium: A 530mV 10-Lane SIMD Processor with Variation Resiliency in 45nm SOI"></img>
		</div>
		<div class="image" style="width:50px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/chip5.png" title="Advanced Near-Threshold Current Sensing Completion Detection Test Chip"></img>
		</div>
		<div class="image" style="width:40px;display:inline;"> 
			<img src="../_fpub/skins/simpletab/images/toggle.png" onclick="toggleGame();" title="Toggle Balls"></img>
		</div>
	</div>
	<div id="canvas"></div>

	<div id="page">
		<div id="suptitle"></div>
		<div id="header" >
			<div id="vis">
				<!-- <a id="logo" href=".." title="Joseph Crop"></a> -->
				<div id="menu"><ul><li> <a class='wikilink' href='../Main/HomePage.html'>Home</a>
</li><li> <span class='here'>  <a class='wikilink' href='../Teaching/Teaching.html'>Teaching</a></span>
</li><li> <a class='wikilink' href='../Resume/Objective.html'>R&eacute;sum&eacute;</a>
</li><li> <a class='wikilink' href='../Publications/Publications.html'>Publications</a>
</li><li> <a class='wikilink' href='../Teaching/Projects.html'>Projects</a>
</li><li> <a class='wikilink' href='../Music/Music.html'>Music</a>
</li><li> <a class='wikilink' href='../Pictures/Pictures.html'>Pictures</a>
</li><li> <a class='wikilink' href='../Contact/Contact.html'>Contact</a>
</li></ul>
</div>
			</div>
		</div>
	<div id="tools">
	    <a rel="nofollow" accesskey='e' href='../Teaching/NANDAnalogComparator.html?action=edit'></a>
	    <a rel="nofollow" accesskey='h' href='../Teaching/NANDAnalogComparator.html?action=diff'></a>      
	    <a rel="nofollow" accesskey='a' href='../Teaching/NANDAnalogComparator.html?action=upload'></a>      
	    <a rel="nofollow" accesskey='c' href='../Teaching/RecentChanges'></a>      
	    <a rel="nofollow" accesskey='r' href='../Site/AllRecentChanges]'></a>
	    <a rel="nofollow" accesskey='l' href='../Teaching/SideBar?action=edit'></a>
			<a rel="nofollow" accesskey='t' href='../Site/TopBar?action=edit'></a>
			<a rel="nofollow" accesskey='m' href='../Site/TabMenu?action=edit'></a>
			<a rel="nofollow" accesskey='f' href='../Site/Footer?action=edit'></a>
	</div>

	<div id="sidebar"><div class='vspace'></div><div class='frame' > 
<h2> <a class='wikilink' href='../Main/HomePage.html'>Home</a></h2>
<h2> <a class='wikilink' href='../Teaching/Teaching.html'>Teaching</a></h2>
<h2> <a class='wikilink' href='../Resume/Objective.html'>R&eacute;sum&eacute;</a></h2>
<h2> <a class='wikilink' href='../Publications/Publications.html'>Publications</a></h2>
<div class='indent'> <a class='wikilink' href='../Publications/Images.html'>Images</a>
</div><h2> <a class='wikilink' href='../Chips/Chips.html'>Chips</a></h2>
<h2> <a class='wikilink' href='../Teaching/Projects.html'>Projects</a></h2>
<h2> <a class='wikilink' href='../Music/Music.html'>Music</a></h2>
<h2> <a class='wikilink' href='../Pictures/Pictures.html'>Pictures</a></h2>
<h2> <a class='wikilink' href='../Contact/Contact.html'>Contact</a></h2>
<h2> <a class='wikilink' href='../Links/Links.html'>Links</a></h2>
<h2> <a class='wikilink' href='../Site/Search.html'>Search</a></h2>
</div>
<div class='vspace'></div><div class='frame' > 
<h3>Class Projects</h3>
<div class='indent'><a class='wikilink' href='../Classes/ECE521.html'>ECE 521 - joeSpice</a>
</div><div class='indent'><a class='wikilink' href='../Classes/ECE570.html'>ECE 570</a>
</div><div class='indent'><a class='wikilink' href='../Classes/ECE577.html'>ECE 577</a>
</div><h3>Tools</h3>
<div class='indent'><a class='wikilink' href='../Tools/VIM8VerilogSetup.html'>VIM 8.0 Setup for Verilog</a>
</div><div class='indent'><a class='wikilink' href='../Tools/SpiceMeasureParser.html'>Spice Measure File Parser</a>
</div><div class='indent'><a class='wikilink' href='../Tools/GoogleDocsSchematic.html'>Google Docs Circuits</a>
</div><div class='indent'><a class='wikilink' href='../Tools/OpenCores.html'>OpenCores.org Peojects</a>
</div><div class='indent'><a class='wikilink' href='../Tools/CellCulling.html'>Cell Culling Toolkit</a>
</div></div>
</div>
	
	<div id="content"><!--PageText-->
<div id='wikitext'>
<h1>An Analog Comparator Built Entirely out of 7410 Digital NAND3 Chips</h1>
<h3>Theory</h3>
<p>Every first-year EE student can tell you why the NAND gate is the most versatile. It can be used to generate any type of gate (AND/OR/XNOR, etc.) and has the best performance over its counterparts.
</p>
<p class='vspace'>Little do they know, the NAND gate isn't just versatile in the digital world, it can even be used in the analog world. Let's take a closer look at the internal structure of the NAND3:
</p>
<div class='vspace'></div><div  style='text-align: center;' class='img'><img src='../_uploads/Teaching/nand3_transistor.png' alt='NAND3 transistor level' title='NAND3 transistor level' /></div>
<p class='vspace'>Nothing too special on its own, but what happens when you pair it precisely with another NAND3 gate in a feedback pattern similar to an SR latch?
</p>
<div class='vspace'></div><div  style='text-align: center;' class='img'><img width='450px' src='../_uploads/Teaching/nand3_comparator.png' alt='Two NAND3 gates configured as an analog comparator' title='Two NAND3 gates configured as an analog comparator' /></div>
<p class='vspace'>You actually end up with a simple form of clocked analog <a class='urllink' href='https://en.wikipedia.org/wiki/Comparator' rel='nofollow'>comparator</a>!
These devices<sup>1</sup> (believe it or not) can actually be used to compare two analog values at the edge of a clock. Furthermore, 7410 chips usually have buffers at their inputs/outputs and for some models they are actually made from a combination of smaller 2-input gates.  Even with these issues the comparator still functions (but it does have much larger hysteresis and a smaller dynamic range).
</p>
<p class='vspace'>In order to compare continuously, this comparator needs to be followed by a latch or flip flop to keep the value of the last conversion as the comparator is being reset. This can again be made entirely out of NAND3 gates but for simplicity I used a 74175 quad FF chip.
</p>
<div class='vspace'></div><h3>Measurement Results</h3>
<p>In order to prove this theory I took a 7410 triple 3-input NAND chip and built the comparator circuit above. The final circuit I ended up testing is below.
</p>
<div class='vspace'></div><div  style='text-align: center;' class='img'><img width='450px' src='../_uploads/Teaching/Comparator_with_FF.png' alt='Schematic of analog comparator made from 7400 logic chips' title='Schematic of analog comparator made from 7400 logic chips' /></div>
<p class='vspace'>The output value needs to be saved before the comparator is reset every cycle. Because the comparator resets at each negative clock edge I used the extra NAND3 gate as an inverter to drive the clock of a 74175 Flip-Flop, capturing the output of the comparator before reset.
</p>
<p class='vspace'>With this configuration I tested the comparator at a couple different clock and input frequencies with a fixed comparison level of 2V DC.
</p>
<p class='vspace'>
</p>
<table Border='0' ><tr ><th  align='center'><a class='urllink' href='../_uploads/Teaching/comp_setup.jpg' title='Comparator breadboard setup' rel='nofollow'><img height='100px' src='../_uploads/Teaching/comp_setup.jpg' alt='' /></a></th><th  align='center'><a class='urllink' href='../_uploads/Teaching/scope1.png' title='200kHz clock, 100kHz input sine wave, 46mA' rel='nofollow'><img height='100px' src='../_uploads/Teaching/scope1.png' alt='' /></a></th><th  align='center'><a class='urllink' href='../_uploads/Teaching/scope2.png' title='40MHz clock, 100kHz input sine wave, 61mA' rel='nofollow'><img height='100px' src='../_uploads/Teaching/scope2.png' alt='' /></a></th><th  align='center'><a class='urllink' href='../_uploads/Teaching/scope3.png' title='40MHz clock, 4MHz input sine wave, 67mA' rel='nofollow'><img height='100px' src='../_uploads/Teaching/scope3.png' alt='' /></a></th></tr>
<tr ><th  align='center'>1</th><th  align='center'>2</th><th  align='center'>3</th><th  align='center'>4</th></tr>
</table>
<div class='vspace'></div><ol><li>Test breadboard setup with 7410 and 74175 chips.
</li><li>Under basic operating conditions (200kHz clock, 100kHz input) the comparator works very well. It draws about 46mA at 5V.
</li><li>The maximum clock frequency I was able to get the comparator to operate correctly was just over 40MHz. Increasing the clock frequency increases the current to 61mA.
</li><li>With the 40MHz clock, the highest input frequency that showed anything reasonable topped out at around 4MHz. which is pretty good compared to the bandwidth of popular analog comparators (<a class='urllink' href='https://www.national.com/ds/LM/LM339.pdf' rel='nofollow'>LM339</a>).
</li></ol><p class='vspace'>
</p>
<table Border='1' style='border-collapse:collapse' cellpadding='5' ><tr ><th  align='center'>7400-series chips used</th><th  align='center'>hc74s10n, 74175n</th></tr>
<tr ><th  align='center'>Supply Voltage</th><th  align='center'>5V</th></tr>
<tr ><th  align='center'>Power @40MHz</th><th  align='center'>335-305mW</th></tr>
<tr ><th  align='center'>Power @200kHz</th><th  align='center'>230mW</th></tr>
<tr ><th  align='center'>Conversion Speed</th><th  align='center'>up to 40MHz</th></tr>
<tr ><th  align='center'>Input bandwidth</th><th  align='center'>~4MHz</th></tr>
</table><p>
</p>
<div class='vspace'></div><h3>Uses</h3>
<ul><li><em>Analog Comparator</em>: Compare two analog voltages and do something.
</li><li><em>Analog to Digital Converter</em>: Many form's of ADCs use comparators to get digital values from analog inputs, one of the simplest among them is the Flash ADC.
</li><li><em>Servo Driver</em>: By inputting a sign wave at the right frequency you can change the comparison level to output a slow PWM wave.
</li><li><em>Sensors</em>: Many different types of sensors can be interfaced, temperature, light, sound, "clappers" etc.
</li><li><em>Level Shifters</em>: By setting the threshold correctly you can easily pass data between a low supply (say 1V) and a high supply (say 5V).
</li><li><em>Many more</em>: <a class='urllink' href='https://home.cogeco.ca/~rpaisley4/Comparators.html' rel='nofollow'>https://home.cogeco.ca/~rpaisley4/Comparators.html</a>
</li></ul><div class='vspace'></div><h3>Future Work</h3>
<p>Not only can these NAND gates be used as analog comparators they can even be used as <a class='urllink' href='https://makerdude.com/blog/7400-based-full-wave-rectifier/' rel='nofollow'>diodes</a>, variable resistors, and variable capacitors. This opens the door or even more applications. Although, it has not been proven that they can be used as caps and resistors yet. ;)
</p>
<p class='vspace'><br /><br /><br /><br /><sup>1</sup> <span style='font-size:83%'>NAND gate based comparators have been shown to work in custom ASICs where the structure of the gate is known and have been used to make <a class='urllink' href='https://ieeexplore.ieee.org/search/srchabstract.jsp?arnumber=5986446' rel='nofollow'>Stochastic Flash ADCs</a>. However, not only is the NAND structure of the 7410 not known, and is likely different than expected. For example, the chips have input and output buffers that change the characteristics of operation.</span>
</p>
<p class='vspace'  style='text-align: right;'> Views: 44971
</p>
</div>
</div>
	
	<div class="clear"> </div>
	
</div>
	
<div id='footer'>
	
	<!--HTMLFooter-->
</div>

    <!--[if IE]><script type="text/javascript" src="lib/excanvas.js"></script><![endif]-->
    <script src="../_fpub/skins/simpletab/lib/prototype-1.6.0.2.js"></script>

    <!-- box2djs -->
    <script src='../_fpub/skins/simpletab/js/box2d/common/b2Settings.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/common/math/b2Vec2.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/common/math/b2Mat22.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/common/math/b2Math.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2AABB.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Bound.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2BoundValues.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Pair.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2PairCallback.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2BufferedPair.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2PairManager.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2BroadPhase.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Collision.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/Features.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2ContactID.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2ContactPoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Distance.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Manifold.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2OBB.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/b2Proxy.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/ClipVertex.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2Shape.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2ShapeDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2BoxDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2CircleDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2CircleShape.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2MassData.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2PolyDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/collision/shapes/b2PolyShape.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2Body.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2BodyDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2CollisionFilter.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2Island.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2TimeStep.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2ContactNode.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2Contact.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2ContactConstraint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2ContactConstraintPoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2ContactRegister.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2ContactSolver.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2CircleContact.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2Conservative.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2NullContact.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2PolyAndCircleContact.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/contacts/b2PolyContact.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2ContactManager.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2World.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/b2WorldListener.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2JointNode.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2Joint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2JointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2DistanceJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2DistanceJointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2Jacobian.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2GearJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2GearJointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2MouseJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2MouseJointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2PrismaticJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2PrismaticJointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2PulleyJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2PulleyJointDef.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2RevoluteJoint.js'></script>
    <script src='../_fpub/skins/simpletab/js/box2d/dynamics/joints/b2RevoluteJointDef.js'></script>
    <script type="text/javascript" src="../_fpub/skins/simpletab/js/protoclass.js"></script> 
    <script type="text/javascript" src='../_fpub/skins/simpletab/js/main.js'></script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38823739-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

	</script>
</body>
</html>
